# Wazuh MCP Server Backup Configuration v3.0.0

# Backup settings
BACKUP_DIR="/backup/wazuh-mcp"
RETENTION_DAYS=30
COMPRESSION_LEVEL=6
ENABLE_ENCRYPTION=true
ENCRYPTION_KEY=""  # Set this to a strong encryption key

# Database settings
REDIS_BACKUP_ENABLED=true
REDIS_BACKUP_METHOD="rdb"  # rdb or aof
REDIS_BACKUP_CONSISTENCY_CHECK=true

# Application settings
CONFIG_BACKUP_ENABLED=true
LOGS_BACKUP_ENABLED=true
CERTS_BACKUP_ENABLED=true
DOCKER_BACKUP_ENABLED=true

# Backup verification
VERIFY_BACKUP_INTEGRITY=true
VERIFY_BACKUP_RESTORE=false  # Set to true for full restore testing

# Remote storage settings
S3_BACKUP_ENABLED=false
S3_BUCKET=""
S3_REGION="us-east-1"
S3_STORAGE_CLASS="STANDARD_IA"
S3_ENCRYPTION="AES256"
S3_LIFECYCLE_ENABLED=true

# Azure Blob Storage (alternative to S3)
AZURE_BACKUP_ENABLED=false
AZURE_STORAGE_ACCOUNT=""
AZURE_CONTAINER_NAME=""
AZURE_ACCESS_KEY=""

# Google Cloud Storage (alternative to S3)
GCS_BACKUP_ENABLED=false
GCS_BUCKET=""
GCS_PROJECT_ID=""
GCS_STORAGE_CLASS="NEARLINE"

# Network settings
BACKUP_BANDWIDTH_LIMIT=""  # e.g., "10MB/s"
BACKUP_TIMEOUT=3600  # seconds
BACKUP_RETRY_COUNT=3
BACKUP_RETRY_DELAY=60  # seconds

# Compression settings
COMPRESSION_ALGORITHM="gzip"  # gzip, bzip2, xz
COMPRESSION_THREADS=4
COMPRESSION_MEMORY_LIMIT="1G"

# Encryption settings
ENCRYPTION_ALGORITHM="AES256"
ENCRYPTION_KEY_DERIVATION="PBKDF2"
ENCRYPTION_ITERATIONS=100000

# Notification settings
NOTIFICATION_ENABLED=true
NOTIFICATION_EMAIL=""
NOTIFICATION_SLACK_WEBHOOK=""
NOTIFICATION_DISCORD_WEBHOOK=""
NOTIFICATION_ON_SUCCESS=true
NOTIFICATION_ON_FAILURE=true
NOTIFICATION_ON_WARNING=true

# Monitoring settings
PROMETHEUS_METRICS_ENABLED=true
BACKUP_METRICS_PORT=9091
BACKUP_METRICS_PATH="/metrics"
HEALTH_CHECK_ENDPOINT="/health"

# Logging settings
BACKUP_LOG_LEVEL="INFO"  # DEBUG, INFO, WARN, ERROR
BACKUP_LOG_FILE="/var/log/wazuh-mcp-backup.log"
BACKUP_LOG_MAX_SIZE="100MB"
BACKUP_LOG_MAX_FILES=10
BACKUP_LOG_COMPRESS=true

# Performance settings
BACKUP_PARALLEL_JOBS=2
BACKUP_IO_NICE_LEVEL=7
BACKUP_CPU_NICE_LEVEL=19
BACKUP_DISK_IO_LIMIT=""  # e.g., "50MB/s"

# Security settings
BACKUP_USER="backup"
BACKUP_GROUP="backup"
BACKUP_PERMISSIONS=0600
BACKUP_DIRECTORY_PERMISSIONS=0700
BACKUP_SECURE_DELETE=true

# Schedule settings (for cron integration)
FULL_BACKUP_SCHEDULE="0 2 * * 0"    # Weekly on Sunday at 2 AM
INCREMENTAL_BACKUP_SCHEDULE="0 2 * * 1-6"  # Daily at 2 AM except Sunday
CLEANUP_SCHEDULE="0 3 * * 0"        # Weekly cleanup on Sunday at 3 AM

# Backup validation settings
VALIDATE_BACKUP_CHECKSUM=true
VALIDATE_BACKUP_METADATA=true
VALIDATE_BACKUP_STRUCTURE=true
VALIDATE_REDIS_BACKUP=true
VALIDATE_CONFIG_BACKUP=true

# Disaster recovery settings
DR_BACKUP_ENABLED=false
DR_BACKUP_LOCATION=""
DR_BACKUP_FREQUENCY="weekly"
DR_BACKUP_RETENTION=90  # days
DR_BACKUP_ENCRYPTION_KEY=""

# Compliance settings
COMPLIANCE_AUDIT_ENABLED=false
COMPLIANCE_RETENTION_POLICY="7years"
COMPLIANCE_ENCRYPTION_REQUIRED=true
COMPLIANCE_AUDIT_LOG="/var/log/backup-audit.log"

# Advanced settings
BACKUP_DEDUPLICATION=false
BACKUP_DIFFERENTIAL_ENABLED=false
BACKUP_SNAPSHOT_ENABLED=false
BACKUP_INCREMENTAL_FOREVER=false
BACKUP_CATALOG_ENABLED=true

# Environment-specific settings
ENVIRONMENT="production"  # production, staging, development
BACKUP_PRIORITY="high"    # high, medium, low
BACKUP_MAINTENANCE_WINDOW="02:00-04:00"
BACKUP_BLACKOUT_DATES=""  # comma-separated dates (YYYY-MM-DD)

# Integration settings
BACKUP_WEBHOOK_URL=""
BACKUP_API_KEY=""
BACKUP_CUSTOM_SCRIPT=""
BACKUP_POST_SCRIPT=""
BACKUP_PRE_SCRIPT=""

# Resource limits
BACKUP_MAX_MEMORY="2G"
BACKUP_MAX_CPU_PERCENT=50
BACKUP_MAX_DISK_USAGE="80%"
BACKUP_MAX_NETWORK_BANDWIDTH="100MB/s"

# Error handling
BACKUP_CONTINUE_ON_ERROR=false
BACKUP_FAIL_FAST=true
BACKUP_ERROR_THRESHOLD=3
BACKUP_WARNING_THRESHOLD=10

# Backup catalog settings
CATALOG_ENABLED=true
CATALOG_DATABASE="sqlite"  # sqlite, mysql, postgresql
CATALOG_DATABASE_URL=""
CATALOG_RETENTION_DAYS=365
CATALOG_COMPRESSION=true

# Testing settings
BACKUP_TEST_MODE=false
BACKUP_DRY_RUN=false
BACKUP_VERIFY_ONLY=false
BACKUP_SIMULATE_FAILURES=false

# Backup exclusions
BACKUP_EXCLUDE_PATTERNS="*.tmp,*.log.gz,*.bak,core.*"
BACKUP_EXCLUDE_DIRECTORIES="tmp,cache,logs/old"
BACKUP_EXCLUDE_FILES=""
BACKUP_INCLUDE_PATTERNS=""

# Backup optimization
BACKUP_OPTIMIZE_FOR_SIZE=true
BACKUP_OPTIMIZE_FOR_SPEED=false
BACKUP_OPTIMIZE_FOR_RECOVERY=false
BACKUP_DEDUPLICATE_THRESHOLD="1MB"

# Cloud provider specific settings
AWS_PROFILE=""
AWS_REGION=""
AWS_KMS_KEY_ID=""
AWS_GLACIER_ENABLED=false
AWS_GLACIER_TRANSITION_DAYS=90

AZURE_TENANT_ID=""
AZURE_CLIENT_ID=""
AZURE_CLIENT_SECRET=""
AZURE_ARCHIVE_ENABLED=false
AZURE_ARCHIVE_TRANSITION_DAYS=90

GCS_SERVICE_ACCOUNT_KEY=""
GCS_ARCHIVE_ENABLED=false
GCS_ARCHIVE_TRANSITION_DAYS=90

# Backup hooks
PRE_BACKUP_HOOK=""
POST_BACKUP_HOOK=""
PRE_RESTORE_HOOK=""
POST_RESTORE_HOOK=""
ERROR_HOOK=""

# Custom settings (add your own configurations here)
CUSTOM_BACKUP_LOCATION=""
CUSTOM_RETENTION_POLICY=""
CUSTOM_NOTIFICATION_WEBHOOK=""
CUSTOM_BACKUP_SCRIPT=""